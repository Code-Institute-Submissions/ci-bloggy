{% extends 'base.html' %}
{% block title %}
Bloggy | User
{% endblock title %}
{% block external_css %}
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
</script>
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-lite.min.js"></script>
{% endblock external_css %}
{% block main %}
<header>
    <div class="row">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <ul class="flashes center-align">
            {% for message in messages %}
            <li class="success-message">{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
        </row>
        <div class="login-hero center-align">
            <div class="row">
                <h3 class="login-greeting">Create a new post</h1>
            </div>
        </div>
</header>
<main>
    <div class="row">
        <form class="col s12" method="POST" action="{{ url_for('new_post') }}">
            {{ form.csrf_token }}
            <div class="row">
                <div class="input-field col s12">
                    {{ form.title(class_="new-post-title") }}
                    {% if form.title.errors %}
                    <ul class="center-align">{% for error in form.title.errors %}<li
                            style="font-size: small; color: #F1007C;">
                            {{ error }}</li>{% endfor %}</ul>
                    {% endif %}
                    <label for="title">Your post title</label>
                </div>
            </div>
            <textarea id="summernote" name="post_body"></textarea>
            <div class="input-field col s12">
                {{ form.image_url }}
                {% if form.image_url.errors %}
                <ul class="center-align">
                    {% for error in form.image_url.errors %}
                    <li style="font-size: small; color: #F1007C;">
                        {{ error }}
                    </li>
                    {% endfor %}
                </ul>
                {% endif %}
                <label for="title">Post Image URL</label>
                <p class="small center-align">Please use only direct image links - ie. they must end in *.jpg/*.png or similar</p>
                <button class="btn waves-effect user-page-button" type="submit" name="action">Submit post</button>
            </div>
        </form>
    </div>

</main>
<script>
    $('#summernote').summernote({
        tabsize: 2,
        height: 250,
        toolbar: [
            ['style', ['style']],
            ['font', ['bold', 'underline', 'clear']],
            ['color', ['color']],
            ['para', ['ul', 'ol', 'paragraph']],
            ['table', ['table']],
            ['view', ['fullscreen', 'codeview', 'help']]
        ]
    });
</script>
{% endblock %}